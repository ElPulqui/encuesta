<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Encuesta â€“ El Pulqui</title>
<!-- Open Graph / WhatsApp -->
<meta property="og:type"        content="website">
<meta property="og:url"         content="https://elpulqui.github.io/encuesta/">
<meta property="og:title"       content="Encuesta â€“ El Pulqui">
<meta property="og:description" content="Tu opiniÃ³n mejora nuestro servicio. Â¡CompletÃ¡ la encuesta en 1 minuto!">
<meta property="og:image"       content="https://elpulqui.github.io/encuesta/og-cover.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Metadatos para Twitter -->
<meta name="twitter:card"        content="summary_large_image">
<meta name="twitter:title"       content="Encuesta â€“ El Pulqui">
<meta name="twitter:description" content="Tu opiniÃ³n mejora nuestro servicio. Â¡CompletÃ¡ la encuesta en 1 minuto!">
<meta name="twitter:image"       content="https://elpulqui.github.io/encuesta/og-cover.jpg">

<!-- Favicon (se muestra en la pestaÃ±a del navegador) -->
<link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
<link rel="stylesheet" href="style.css">

<!-- Supabase: ajustar sÃ³lo URL y KEY si cambian -->
<script defer>
const SUPABASE_URL = 'https://quhdiatnjokidvdbqcqy.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1aGRpYXRuam9raWR2ZGJxY3F5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMDE0NTIsImV4cCI6MjA2MzU3NzQ1Mn0.DNHifmY14XB342_wA57YDtqS-p_zjz2Wab3d3-5NNyU';
const ENDPOINT     = `${SUPABASE_URL}/rest/v1/encuestas`;

async function enviarEncuesta(e){
  e.preventDefault();
  const datos = Object.fromEntries(new FormData(e.target).entries());
  ['compra','conductor','limpieza','precio_calidad','servicio_bordo','recomendacion']
    .forEach(k => datos[k] = Number(datos[k]));

  const r = await fetch(ENDPOINT, {
    method:'POST',
    headers:{
      'Content-Type':'application/json',
      apikey: SUPABASE_KEY,
      Authorization:`Bearer ${SUPABASE_KEY}`,
      Prefer:'return=minimal'
    },
    body: JSON.stringify([datos])
  });

  if(r.ok){ window.location='gracias.html'; }
  else {
    console.error(await r.text());
    alert('Ups! No pudimos guardar tu opiniÃ³n ðŸ˜”');
  }
}
</script>
</head>

<body>
  <main class="card">
    <img class="logo" src="https://github.com/ElPulqui/promos-web/blob/main/logo.png?raw=true" alt="El Pulqui">

    <h1>Tu opiniÃ³n <span>mejora</span> nuestro servicio</h1>
    <p class="sub">CompletÃ¡ esta breve encuesta (menos de 1 minuto).</p>

    <form onsubmit="enviarEncuesta(event)">

      <!-- ==== BLOQUE GENERADOR (repite cambiando legend + name) ==== -->
      <fieldset>
        <legend>1. Â¿QuÃ© tan Ã¡gil y claro te resultÃ³ comprar tu pasaje?</legend>
        <div class="chip-group">
          <!-- chips 0-10 -->
          <!-- las clases .chip y .chip input son para estilo -->
          <!-- required solo en la primera -->
          <label class="chip"><input type="radio" name="compra" value="0" required><span>0</span></label>
          <label class="chip"><input type="radio" name="compra" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="compra" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="compra" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="compra" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="compra" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="compra" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="compra" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="compra" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="compra" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="compra" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- 2) Conductor -->
      <fieldset>
        <legend>2. Â¿QuÃ© tan cordial y profesional sentiste al conductor durante el viaje?</legend>
        <div class="chip-group">
          <!-- copia/pega y cambia name="conductor" -->
          <label class="chip"><input type="radio" name="conductor" value="0" required><span>0</span></label>
          <label class="chip"><input type="radio" name="conductor" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="conductor" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="conductor" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="conductor" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="conductor" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="conductor" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="conductor" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="conductor" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="conductor" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="conductor" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- 3) Limpieza -->
      <fieldset>
        <legend>3. Pensando en butacas, baÃ±o y pasillos, Â¿quÃ© tan limpio encontraste el micro?</legend>
        <div class="chip-group">
          <label class="chip"><input type="radio" name="limpieza" value="0" required><span>0</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="limpieza" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- 4) Precio-calidad -->
      <fieldset>
        <legend>4. SegÃºn tu experiencia completa, Â¿cuÃ¡nto valor recibiste por lo que pagaste?</legend>
        <div class="chip-group">
          <label class="chip"><input type="radio" name="precio_calidad" value="0" required><span>0</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="precio_calidad" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- 5) Servicio a bordo -->
      <fieldset>
        <legend>5. Â¿QuÃ© tan Ãºtil y entretenido te resultÃ³ el servicio a bordo (cargadores, TV, mÃºsica, snack)?</legend>
        <div class="chip-group">
          <label class="chip"><input type="radio" name="servicio_bordo" value="0" required><span>0</span></label>
           <label class="chip"><input type="radio" name="servicio_bordo" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="servicio_bordo" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- 6) RecomendaciÃ³n -->
      <fieldset>
        <legend>6. Si un amigo o familiar viaja maÃ±ana, Â¿con quÃ© probabilidad le sugerirÃ­as viajar con El Pulqui?</legend>
        <div class="chip-group">
          <label class="chip"><input type="radio" name="recomendacion" value="0" required><span>0</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="1"><span>1</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="2"><span>2</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="3"><span>3</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="4"><span>4</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="5"><span>5</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="6"><span>6</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="7"><span>7</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="8"><span>8</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="9"><span>9</span></label>
          <label class="chip"><input type="radio" name="recomendacion" value="10"><span>10</span></label>
        </div>
      </fieldset>

      <!-- Comentarios -->
      <label for="comentarios">Comentarios (opcional)</label>
      <textarea id="comentarios" name="comentarios" rows="4"></textarea>

      <button type="submit" class="btn">Enviar respuestas</button>
    </form>
  </main>
</body>
</html>
